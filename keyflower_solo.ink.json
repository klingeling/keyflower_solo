{"inkVersion":19,"root":[[{"#":"author: Adapted from Dale Buonocore (Elad at boardgamegeek.com). Original post found here."},{"->":"start"},["done",{"#f":7,"#n":"g-0"}],null],"done",{"start":["^设置","\n","^1. Place all non-green workers in the bag.","\n","^2. Place green workers to the side.","\n","^3. Sort resources and place to the side.","\n","^4. Draw 8 workers for you and 8 for the AP.","\n","^5. Sort season tiles.","\n","^6. Randomly select home tile for you and AP.","\n","^7. Place 2 boat tiles in play area.","\n","^8. Place the turn order tile in play area.","\n","^9. Place 6 Spring tiles in play area.","\n","^10. Draw 3 Winter tiles, look at them.","\n","^11. Deal 3 random Winter tiles face-down.","\n","^12. You are the Start Player in Spring.","\n","^13. The game proceeds as in regular Keyflower.","\n",{"->":"new_turn"},{"#f":3}],"new_turn":[["ev",{"VAR?":"turn_number"},1,"+","/ev",{"temp=":"turn_number","re":true},"ev",{"VAR?":"turn_number"},4,">","/ev",[{"->":".^.b","c":true},{"b":["\n",{"->":"end"},{"->":".^.^.^.12"},null]}],"nop","\n",{"#":"CLASS: turn"},"^Turn ","ev",{"VAR?":"turn_number"},"out","/ev","^ (","ev","^turn_description",{"VAR?":"turn_number"},"listInt","out","/ev","^)","\n","ev","str","^It's automa's turn?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"turn"},"\n",{"#f":7}]}],{"#f":3}],"turn":["ev",{"VAR?":"turn_number"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["\n",{"->":"center_tile"},{"->":"turn.7"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"random_choose"},{"->":"turn.7"},null]}],"nop","\n",{"#f":3}],"random_choose":["^Automa randomizes ... ",["ev","visit",6,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"nop",{"s0":["pop","\n","^(D6:1) ",{"->":"center_tile"},"\n",{"->":".^.^.41"},null],"s1":["pop","\n","^(D6:2) ",{"->":"center_tile"},"\n",{"->":".^.^.41"},null],"s2":["pop","\n","^(D6:3) ",{"->":"center_tile"},"\n",{"->":".^.^.41"},null],"s3":["pop","\n","^(D6:4) ",{"->":"center_tile"},"\n",{"->":".^.^.41"},null],"s4":["pop","\n","^(D6:5) ",{"->":"village_tile"},"\n",{"->":".^.^.41"},null],"s5":["pop","\n","^(D6:6) ",{"->":"village_tile"},"\n",{"->":".^.^.41"},null],"#f":5}],"\n",{"#f":3}],"center_tile":[{"#":"CLASS: important"},"^Center tiles: he prioritizes his “main” choices as follows:","\n","^1) Bidding on an open tile, with the Turn Order tile as the last option;","\n","^2) Outbidding you on one of the tiles;","\n","^3) “Using” a tile, first prioritizing “his” (i.e., one where he currently has the highest bid), then shifting to \"yours\" if needed;","\n","^4) “Over-using” a tile (i.e., placing workers on one which already has at least one worker on it from a previous use) -- again, \"his\" first, then \"yours\" if needed.","\n","^Within these “main” choices, his “particular” choices among otherwise equivalent options are determined by the following “priority-tree”:","\n","^1) the option which requires the smallest number of workers;","\n","^2) the option involving the worker color of which he currently has the most;","\n","^3) if there’s still a tie, use the D6 to make the final choice. Note that this “priority-tree” will similarly determine his “particular” choices when he is acting in your Home Village, below.","\n",{"->":"choices"},{"#f":3}],"village_tile":[{"#":"CLASS: important"},"^Village tiles - the priorities for his “main” choices are as follows:","\n","^1) “Using” a tile. When there are more than 6 viable (i.e., empty and usable) tiles, I typically use the D6 by considering my Home tile as 1, then moving to the first ring of adjacent tiles, starting at the top and going clockwise, then to the second ring if necessary. (Another option would be to use a D10 or larger, and just \"count down\" each column going from left to right -- or even drawing a card from a straight deck would work, as this would provide a random number from 1-13);","\n","^2) “Over-using” a tile, as described previously.","\n",{"->":"choices"},{"#f":3}],"choices":[["ev","str","^Throw Dice","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No more keyples/actions","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^New automa turn","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","^Dice: ",["ev","visit",6,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"nop",{"s0":["pop","^1",{"->":".^.^.41"},null],"s1":["pop","^2",{"->":".^.^.41"},null],"s2":["pop","^3",{"->":".^.^.41"},null],"s3":["pop","^4",{"->":".^.^.41"},null],"s4":["pop","^5",{"->":".^.^.41"},null],"s5":["pop","^6",{"->":".^.^.41"},null],"#f":5}],"^. ",{"->":".^.^.^"},"\n",{"#f":7}],"c-1":["^ ",{"->":"new_turn"},"\n",{"#f":7}],"c-2":["^ ",{"->":"turn"},"\n",{"#f":7}]}],{"#f":3}],"end":[[{"#":"CLASS: endgame"},"^End of game","\n","^Calculate points and post on BGG: https://boardgamegeek.com/thread/944605/keyflower-solitaire","\n",["ev",{"^->":"end.0.5.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^New game?",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"end.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.5.s"},[{"#n":"$r2"}],"\n",{"#":"RESTART"},"end",{"#f":7}]}],{"#f":3}],"global decl":["ev",0,{"VAR=":"turn_number"},{"list":{},"origins":["turn_description"]},{"VAR=":"turn_description"},"/ev","end",null],"#f":3}],"listDefs":{"turn_description":{"Spring":1,"Summer":2,"Fall":3,"Winter":4}}}